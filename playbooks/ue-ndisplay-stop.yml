---
# Stop nDisplay cluster on content nodes
#
# Sends WM_CLOSE via a scheduled task in the interactive session so UE can
# shut down gracefully (disconnect Concert, flush logs, etc). Falls back to
# force-kill if the process doesn't exit within the timeout.
#
# Usage: ansible-playbook playbooks/ue-ndisplay-stop.yml

- name: Stop nDisplay cluster
  hosts: ue_content
  gather_facts: false

  tasks:
    - name: Graceful shutdown of UnrealEditor
      ansible.builtin.include_tasks: tasks/win_graceful_stop.yml
      vars:
        process_name: UnrealEditor
        graceful_timeout: 15

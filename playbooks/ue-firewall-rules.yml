---
# Firewall rules for UE services (nDisplay, Concert)
#
# Usage:
#   ansible-playbook playbooks/ue-firewall-rules.yml

- name: nDisplay firewall rules
  hosts: ue_content
  gather_facts: false

  tasks:
    - name: Open nDisplay cluster sync ports
      community.windows.win_firewall_rule:
        name: nDisplay Cluster Sync
        direction: in
        protocol: tcp
        localport: "41001,41003,41004"
        action: allow
        enabled: true

- name: Concert server firewall rules
  hosts: ue_editing
  gather_facts: false

  tasks:
    - name: Open Concert server UdpMessaging port
      community.windows.win_firewall_rule:
        name: Concert Multi-User Server (UDP)
        direction: in
        protocol: udp
        localport: "{{ concert_server_port }}"
        action: allow
        enabled: true
